import requests
import pandas as pd
import mitosheet

def obtener_todos_los_pokemones():
    # URL base de la PokeAPI para la lista de Pokémon
    url_base = "https://pokeapi.co/api/v2/pokemon/"

    # Se realiza la primera solicitud para obtener la lista de Pokémon
    response = requests.get(url_base + "?limit=1008")
    data = response.json()

    # Se obtiene la lista de resultados
    pokemons = data['results']

    # Lista para almacenar los datos de los Pokémon
    datos_pokemones = []

    # Itero sobre la lista de Pokémon
    for pokemon in pokemons:
        nombre_pokemon = pokemon['name']
        url_pokemon = pokemon['url']

        # Realizar una solicitud para obtener información detallada del Pokémon
        response_pokemon = requests.get(url_pokemon)
        data_pokemon = response_pokemon.json()

        # Agrego información relevante al diccionario de datos
        info_pokemon = {
            'Nombre': nombre_pokemon,
            'ID': data_pokemon['id'],
            'Peso': data_pokemon['weight'],
            'Altura': data_pokemon['height'],
            'Experiencia Base': data_pokemon['base_experience'],
            'Tipos': [tipo['type']['name'] for tipo in data_pokemon['types']],
            'Habilidades': [habilidad['ability']['name'] for habilidad in data_pokemon['abilities']],
            **{stat['stat']['name']: stat['base_stat'] for stat in data_pokemon['stats']},
            'Movimientos': [movimiento['move']['name'] for movimiento in data_pokemon['moves']],
        }
        # Agregó el diccionario de datos a la lista
        datos_pokemones.append(info_pokemon)

    # Creo un DataFrame a partir de la lista de datos
    df_pokemones = pd.DataFrame(datos_pokemones)

    # Guardo el DataFrame en un archivo CSV
    df_pokemones.to_csv('pokemones.csv', index=False)

if __name__ == "__main__":
    obtener_todos_los_pokemones()

import mitosheet
mitosheet.sheet(analysis_to_replay="id-wpgkwmxmca")
